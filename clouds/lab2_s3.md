**Лабораторная работа: Развертывание статического веб-сайта в AWS S3**

### **Цель работы:**
Ознакомиться с базовыми операциями работы в AWS через веб-консоль и командную строку, научиться настраивать хостинг статического веб-сайта в S3 и управлять доступом к бакету.

---

### **Шаг 1: Вход в веб-консоль AWS через IAM-аккаунт**
1. Перейдите на [AWS Management Console](https://aws.amazon.com/console/).
2. Введите учетные данные IAM-пользователя (логин и пароль).
3. Убедитесь, что у пользователя есть необходимые права для работы с S3.

---

### **Шаг 2: Создание бакета S3 с включенным ACL**
1. Откройте сервис **S3** в веб-консоли AWS.
2. Нажмите **Create bucket**.
3. Укажите имя бакета (например, `my-static-website`).
4. Выберите регион.
5. Включите **ACL (Access Control Lists)** и разрешите публичный доступ.
6. Отключите блокировку публичного доступа (по необходимости).
7. Создайте бакет.

---

### **Шаг 3: Создание и загрузка файла index.html**
1. Локально создайте файл `index.html` со следующим содержимым:
   ```html
   <!DOCTYPE html>
   <html>
   <head><title>My AWS Website</title></head>
   <body><h1>Welcome to my static website on AWS S3!</h1></body>
   </html>
   ```
2. В веб-консоли AWS откройте созданный бакет.
3. Перейдите во вкладку **Objects** и загрузите `index.html`.

---

### **Шаг 4: Включение хостинга веб-сайтов и проверка работы**
1. В настройках бакета выберите **Properties** → **Static website hosting**.
2. Включите хостинг и укажите `index.html` как **Index document**.
3. Сохраните настройки.
4. Скопируйте выданный URL и откройте его в браузере.

---

### **Шаг 5: Отключение ACL и настройка доступа через политики**
1. В настройках бакета отключите **ACL (Access Control Lists)**.
2. Откройте **Permissions** → **Bucket policy** и вставьте следующую JSON-политику:
   ```json
   {
     "Version": "2012-10-17",
     "Statement": [
       {
         "Effect": "Allow",
         "Principal": "*",
         "Action": "s3:GetObject",
         "Resource": "arn:aws:s3:::my-static-website/*"
       }
     ]
   }
   ```
3. Сохраните политику и убедитесь, что сайт доступен в браузере.

---

### **Шаг 6: Создание ключа доступа для CLI в веб-консоли**
1. В веб-консоли AWS перейдите в **IAM** → **Users**.
2. Выберите своего пользователя.
3. Перейдите во вкладку **Security credentials** и создайте новый **Access key**.
4. Сохраните `Access Key ID` и `Secret Access Key`.

---

### **Шаг 7: Установка AWS CLI на локальный компьютер**
1. Скачайте и установите AWS CLI ([инструкции](https://aws.amazon.com/cli/)).
2. Проверьте установку командой:
   ```sh
   aws --version
   ```
3. Настройте AWS CLI командой:
   ```sh
   aws configure
   ```
   Введите сохраненные **Access Key ID** и **Secret Access Key**.

---

### **Шаг 8: Проверка списка бакетов и файлов через командную строку**
1. Выведите список бакетов:
   ```sh
   aws s3 ls
   ```
2. Выведите список файлов в бакете:
   ```sh
   aws s3 ls s3://my-static-website/
   ```

---

### **Шаг 9: Модификация `index.html` и загрузка его через командную строку**
1. Измените `index.html`, добавив строку:
   ```html
   <p>Updated version of the website</p>
   ```
2. Загрузите файл в S3:
   ```sh
   aws s3 cp index.html s3://my-static-website/
   ```
3. Откройте сайт в браузере и убедитесь, что изменения применились.

---

### **Шаг 10: Удаление бакета через командную строку**
1. Удалите все файлы в бакете:
   ```sh
   aws s3 rm s3://my-static-website/ --recursive
   ```
2. Удалите сам бакет:
   ```sh
   aws s3 rb s3://my-static-website/
   ```

---

### **Вывод:**
В ходе лабораторной работы были освоены базовые операции работы с AWS S3, включая загрузку файлов, настройку веб-хостинга, управление доступом и использование командной строки для взаимодействия с облачным хранилищем.

