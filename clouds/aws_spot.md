# Работа со спотовыми инстансами в AWS

1. Залогиньтесь в в веб-консоль AWS: https://console.aws.amazon.com/

    * тип входа: IAM User
    * account ID: `volodya-leveryev`
    * username: `student`
    * password: `Pa$$w0rd`

2. Переключите регион на Tokyo (`ap-northeast-1`). Откройте сервис `EC2 (Elastic Compute Cloud)`, войдите в раздел `Spot Requests`

3. Создайте запрос на спотовый инстанс (`Request Spot Instances`):

    * Выберите AMI: `Amazon Linux 2 AMI`
    * Если у вас нет ранее скачанного ключа, создайте себе новую ключевую пару. Скачивание нового ключа начнется автоматически.
    * Разверните опциональный раздел `Additional launch parameters`:

        - выберите группу правил безопасности (Security Group) `default`
        - создайте тег (`Create Tag`) с именем `Name`, значение — ваша фамилия, выберите оба варианта `Instance` и `Fleet`

    * Выберите в поле `Network` вариант VPC по умолчанию
    * Выберите все доступные подсети (`ap-northeast-1a`, `ap-northeast-1c`, `ap-northeast-1d`)
    * Ограничьте максимальное количество ядер (`vCPUs`): 4
    * Ограничьте максимальный размер памяти (`Memory`): 4 Gb
    * Остальные параметры оставьте без изменений

4. Подключитесь по протоколу SSH

    ```
    ssh -i <файл с ключом> ec2-user@<адрес сервера>
    ```

5. Установите Docker и Redmine:

    Обновите описания пакетов:

    ```
    sudo yum update
    ```

    установитe Docker:

    ```
    sudo yum install docker
    ```

    запустить службу Docker:

    ```
    sudo systemctl start docker
    ```

    скачать и запустить образ Redmine

    ```
    sudo docker run -d -p 80:3000 redmine
    ```


5. Заполнить отчетность:

    * сделайте скриншот подключенного SSH клиента к машине так чтобы была видна команда подключения
    * откройте в браузере публичный адрес сервера (используйте протокол HTTP) и сделайте скриншот запущенного приложения Redmine на машине (так чтобы было видно доменное имя)
    * откройте свойства запроса спотового инстанса (Spot Request) и сделайте скриншот
    * откройте свойства запущенного инстанса и сделайте скриншот
