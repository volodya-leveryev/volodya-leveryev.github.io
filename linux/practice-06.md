---
layout: default
title: Работа с дисками
---
# Работа с дисками

## Цель работы

Получить опыт работы с дисками в Linux.

## Подготовка

Создайте отчет в формате *.doc.

Перед началом работы вам нужно получить у преподавателя:

* адрес сервера
* имя пользователя
* закрытый ключ

Подключитесь к серверу по SSH.

## Ход работы



Добавить к виртуальной машине 4 диска
Создать таблицу разделов
Отформатировать файловую систему
Смонтировать файловую систему
Настроить файловую систему в /etc/fstab


1. Ознакомиться с перечнем блочных устройств с помощью команды lsblk

2. Создать два раздела по 2 Гб с помощью fdisk:

   ```
   sudo fdisk /dev/sda
   ```

3. Создать два раздела по 2 Гб с помощью cfdisk:
    
   ```
   sudo cfdisk /dev/sdb
   ```

4. Создать два раздела по 1 Гб + 3 Гб с помощью parted:


   ```
   sudo parted /dev/sda
   mklabel gpt
   mkpart '' 2048s 2099199s
   mkpart '' 2099200s 8388574s
   quit
       6. Создать два раздела по 1 Гб + 3 Гб на 3 чистом диске утилитой fdisk
       7. Создать два раздела по 3 Гб + 1 Гб на 4 чистом диске утилитой cfdisk
       8. Создать файловые системы на всех созданных разделах (кроме bfs, cramfs):
   sudo mkfs -t ext4 /dev/sda1
   sudo mkfs.ext3 /dev/sda2
   sudo blkid
   ```

5. Смонтировать (подключить) 2 раздела следующим образом:

   ```
   sudo mkdir /mnt/sda1
   sudo mount /dev/sda1 /mnt/sda1
   lsblk
   ```
    
6. Добавить информацию о двух файловых системах в /etc/fstab и  подключить их:

   ```
   sudo mkdir /mnt/diskb_part1
   sudo nano /etc/fstab
   sudo mount -a
   ```

7. Добавить метки для двух файловых систем и указать их в /etc/fstab, затем подключить их:
   
   ```
   sudo e2label /dev/sdc1 part1
   sudo nano /etc/fstab
   mount -a
   ```

8. Отобразить показания SMART:

   ```
   sudo apt-get update
   sudo apt-get install -y smartmontools
   (если попросят сконфигурировать postfix - выбираем No configuration)
   sudo smartctl -a /dev/sda
   ```
