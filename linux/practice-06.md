---
layout: default
title: Работа с дисками
---
# Работа с дисками

## Цель работы

Получить опыт работы с дисками в Linux.

## Подготовка

Создайте отчет в формате *.doc.

Перед началом работы вам нужно получить у преподавателя:

* адрес сервера
* имя пользователя
* закрытый ключ

Подключитесь к серверу по SSH.

## Ход работы

1. Ознакомиться с перечнем блочных устройств с помощью команды lsblk

2. Запустите программу редактирования таблицы разделов `fdisk` и изучите её команды (нажмите клавишу `m`).

   ```
   sudo fdisk /dev/vdb
   ```

   Создайте два раздела по 2 Гб с помощью fdisk, отобразите таблицу разделов (команда `p`) и сделайте скриншот.

   Выйдите из `fdisk` с сохранением изменений (команда `w`).

3. Создайте два раздела по 2 Гб с помощью cfdisk:
    
   ```
   sudo cfdisk /dev/vdc
   ```

   Сделайте скриншот таблицы разделов

   Выйдите из `cfdisk` с сохранением изменений.

4. Запустите программу редактирования таблицы разделов `parted` и изучите её команды (используйте команду `help`).

   Создайте два раздела по 1 Гб + 3 Гб с помощью команд:


   ```
   sudo parted /dev/vdd
   mklabel gpt
   mkpart '' 2048s 2099199s
   mkpart '' 2099200s 8388574s
   quit
   ```

   Отобразите таблицу разделов (команда `print`) и сделайте скриншот.

5. Создайте файловые системы на всех созданных разделах (кроме bfs, cramfs):

   ```
   sudo mkfs -t ext4 /dev/vdb1
   sudo mkfs.ext3 /dev/vdb2
   ...
   sudo blkid
   ```

   Сделайте скриншот результата работы команды `blkid`.

8. Смонтируйте (подключите) 2 раздела следующим образом:

   ```
   sudo mkdir /mnt/vdb1
   sudo mkdir /mnt/vdb2
   sudo mount /dev/vdb1 /mnt/vdb1
   sudo mount /dev/vdb2 /mnt/vdb2
   lsblk
   ```

9. Добавьте информацию о двух файловых системах в /etc/fstab и подключите их:

   ```
   sudo mkdir /mnt/vdc1
   sudo mkdir /mnt/vdc2
   sudo nano /etc/fstab
   sudo mount -a
   ```

10. Добавьте метки для двух файловых систем и указать их в /etc/fstab, затем подключите их:
   
    ```
    sudo e2label /dev/vdd1 part1
    sudo e2label /dev/vdd2 part2
    sudo mkdir /mnt/vdd1
    sudo mkdir /mnt/vdd2
    sudo nano /etc/fstab
    sudo mount -a
    ```

   Сделайте скриншот содержимого файла `/etc/fstab` и результата работы команды `lsblk`.
