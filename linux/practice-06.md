---
layout: default
title: Работа с дисками
---
# Работа с дисками

## Цель работы

Получить опыт работы с дисками в Linux.

## Подготовка

Создайте отчет в формате *.doc.

Перед началом работы вам нужно получить у преподавателя:

* адрес сервера
* имя пользователя
* закрытый ключ

Подключитесь к серверу по SSH.

## Ход работы



Добавить к виртуальной машине 4 диска
Создать таблицу разделов
Отформатировать файловую систему
Смонтировать файловую систему
Настроить файловую систему в /etc/fstab


1. Ознакомиться с перечнем блочных устройств с помощью команды lsblk

2. Запустите программу редактирования таблицы разделов `fdisk` и изучите её команды (нажмите клавишу `m`).

   ```
   sudo fdisk /dev/sda
   ```

   Создайте два раздела по 2 Гб с помощью fdisk, отобразите таблицу разделов (команда `p`) и сделайте скриншот.

3. Создайте два раздела по 2 Гб с помощью cfdisk:
    
   ```
   sudo cfdisk /dev/sdb
   ```

   Сделайте скриншот таблицы разделов

4. Запустите программу редактирования таблицы разделов `parted` и изучите её команды (используйте команду `help`).

   Создайте два раздела по 1 Гб + 3 Гб с помощью команд:


   ```
   sudo parted /dev/sda
   mklabel gpt
   mkpart '' 2048s 2099199s
   mkpart '' 2099200s 8388574s
   quit
   ```

   Отобразите таблицу разделов (команда `print`) и сделайте скриншот.

5. Создайте два раздела по 1 Гб + 3 Гб на 3 чистом диске утилитой fdisk

6. Создайте два раздела по 3 Гб + 1 Гб на 4 чистом диске утилитой cfdisk

7. Создайте файловые системы на всех созданных разделах (кроме bfs, cramfs):

   ```
   sudo mkfs -t ext4 /dev/sda1
   sudo mkfs.ext3 /dev/sda2
   sudo blkid
   ```

   Сделайте скриншот результата работы команды `blkid`.

8. Смонтируйте (подключите) 2 раздела следующим образом:

   ```
   sudo mkdir /mnt/sda1
   sudo mount /dev/sda1 /mnt/sda1
   lsblk
   ```

9. Добавьте информацию о двух файловых системах в /etc/fstab и подключите их:

   ```
   sudo mkdir /mnt/diskb_part1
   sudo nano /etc/fstab
   sudo mount -a
   ```

10. Добавьте метки для двух файловых систем и указать их в /etc/fstab, затем подключите их:
   
   ```
   sudo e2label /dev/sdc1 part1
   sudo nano /etc/fstab
   mount -a
   ```

   Сделайте скриншот содержимого файла `/etc/fstab` и результата работы команды `lsblk`.

12. Отобразите показания SMART:

   ```
   sudo apt-get update
   sudo apt-get install -y smartmontools
   sudo smartctl -a /dev/sda
   ```
   (если попросят сконфигурировать `postfix` - выбираем `No configuration`).
