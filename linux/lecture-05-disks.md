# Работа с дисками

## Таблица разделов

LBA - Logical Block Addressing
- 32-битный (макс размер 2 Тб)
- 48-битный

MBR
- можно использовать только 32-битный LBA
- можно создать только 4 раздела (+32 логических диска в расширенном разделе)

GPT

Номера секторов для разделов желательно выравнивать по границе мегабайтов.

SMART

## Файловые системы

ext2, ext3, ext4

BtrFS

Журналируемая файловая система - ведет журнал записи данных, поэтому она устойчивее к отказам. Для обслуживания журнала нужны накладные расходы (тратим 2-5% времени).

Организация данных на низком уровне на SSD сильно отличается от HDD. Это связано с наличием ограничений на количество записей в ячейки SSD.

Для SSD:
- нужно включать TRIM (discard)
- можно отключать atime

Для производительности:
- можно отключать журнал

BtrFS - основана на принципе CoW (Copy on Write)
- сжатие данных на лету
- хранение данных в нескольких разделах
- снимки состояния ФС (snapshot)

zFS

## LVM

Logical Volume Manager

## RAID

RAID - Redundant Array of Independent Disks

RAID-массив - набор дисков, которые ведут себя как единое целое.
- производительность
- надежность хранения данных

Уровни:
- 0
- 1
- 1+0, 0+1
- 5, 4, 6

RAID:
- аппаратный - дорого
- программный

md -драйвер программного RAID в Linux

## Шифрование

LUKS - технология шифрования данных в разделе:
- PIN
- файл с ключом на флешке
- ключ в TPM-модуле

# NAS, SAN, Tape Drive, Tape Library

NAS - Network Attached Storage - специализированный компьютер, который подключает файловые системы по сети.

SAN - Storage Area Network - специализированная сеть для подключения сетевых дисков.

Tape Drive - стриммер - устройство для хранения данных на магнитной ленте.

Tape Library - автоматизированное хранилище на магнитной ленте.
